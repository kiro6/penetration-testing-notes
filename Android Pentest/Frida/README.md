# Content

# setup frida 
```powershell
pip install frida-tools # CLI tools
pip install frida       # Python bindings
npm install frida       # Node.js bindings
# this for autocomplete
npm install @types/frida-gum
```

# Scritping

## Hooking Function
- basic
```js
Java.perform(function () {
    console.log("loading script");
//class name: Dicer
    var Dicer = Java.use("org.secuso.privacyfriendlydicer.dicer.Dicer");
//func name: rollDice
    Dicer.rollDice.implementation = function (param1, param2) {
        console.log("hooking the dice");
        send("value of param1: " + param1+" | value of param2: "+param2);

        return [20, 20, 20, 20, 20, 20, 101];
    }
    console.log("script loading done");
});
```
- diff implementation in a case otherwise return orginal function
```js
Java.perform(function () {
    // Hook into MainActivity's onClick method where the password is checked
    // Override the equals method that compares the hash with the hardcoded hash
    var StringClass = Java.use('java.lang.String');
    StringClass.equals.implementation = function (other) {
        // Log the comparison details
        // console.log("[*] Comparing string with: " + other);

        // If the hash being compared is the one for the password check, bypass it
        if (other == "735c3628699822c4c1c09219f317a8e9") {
            console.log("[*] Bypassing password check!");
            return true;  // Always return true to bypass the password check
        }

        // For all other cases, use the original equals method
        return this.equals(other);
    };
}
```

## Hooking Constructor

```js
Java.perform(()=>{
    console.log("loading script");
    
    var DicerViewModel = Java.use('org.secuso.privacyfriendlydicer.ui.DicerViewModel');

    // Hook the constructor to access or modify the values after object creation
    DicerViewModel.$init.overload().implementation = function () {
        // Call the original constructor to ensure that any initialization done by the original constructor still occurs.
        var instance = this.$init();

        // Modify faceNumber and diceNumber values
        console.log("Original faceNumber: " + this.faceNumber.value);
        console.log("Original diceNumber: " + this.diceNumber.value);

        // Change the values
        this.faceNumber.value = 6;  // Change faceNumber to 10
        this.diceNumber.value = 6;   // Change diceNumber to 2

        console.log("Modified faceNumber: " + this.faceNumber.value);
        console.log("Modified diceNumber: " + this.diceNumber.value);

        return instance;
    };
}
```

## Calling Methods
> This will call the method for a new created Instance of a class 
```js
Java.perform(function() {
    // Use the Random class
    const Random = Java.use('java.util.Random');
    
    // Create an instance of Random
    const randomInstance = Random.$new();
    
    // Generate a random integer between 0 and 100
    var randomValue = randomInstance.nextInt(101); // 101 is exclusive, so it generates 0 to 100
    
    // Send the generated random value to the Frida console
    send("Random.nextInt: " + randomValue);
});

```

## Working with Instances
> this will work on already exisnts instances of classes


-  edit property
```js
Java.perform(function () {
    // Use Java.choose to find instances of the specified class
    Java.choose("de.fgerbig.spacepeng.services.Profile", {
        onMatch: function(instance) {
            // This function is called for each found instance of the class
            send('Found: ' + instance);
            
            // Modify the highScore property of the instance
            instance.highScore.value = 1000000;

            send('Modified highScore: ' + instance.highScore.value);
        },
        onComplete: function() {
            // This function is called when all instances have been processed
            send('All instances processed');
        }
    });
});
```
- edit function
```js
Java.perform(function () {
    // Use Java.choose to find instances of the Game class
    Java.choose("com.example.Game", {
        onMatch: function(instance) {
            // Hook the getScore method
            const getScoreMethod = instance.getScore;

            instance.getScore.implementation = function() {
                // Call the original method (if needed)
                var originalScore = getScoreMethod.call(this);
                
                // Modify the score before returning
                var modifiedScore = originalScore + 1000; // Increase score by 1000

                // Log the original and modified score
                send('Original score: ' + originalScore + ', Modified score: ' + modifiedScore);
                
                return modifiedScore; // Return the modified score
            };

            send('Hooked getScore for instance: ' + instance);
        },
        onComplete: function() {
            send('All instances processed');
        }
    });
});

```
